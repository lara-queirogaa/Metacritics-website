<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Estatísticas & Curiosidades</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        /* Estilos específicos para a FAQ */
        details {
            background: #1a1a1a;
            margin-bottom: 1em;
            border-radius: 4px;
            border-left: 5px solid #ff3333;
            overflow: hidden;
        }
        
        summary {
            padding: 1em;
            cursor: pointer;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2em;
            color: #fff;
            list-style: none; /* Remove a seta padrão nalguns browsers */
            transition: background 0.3s;
        }

        summary:hover {
            background: #2a2a2a;
            color: #ff4d4d;
        }

        /* Seta personalizada */
        summary::after {
            content: '+'; 
            float: right; 
            font-weight: bold;
            color: #ff3333;
        }
        
        details[open] summary::after {
            content: '-';
        }

        .answer-content {
            padding: 1em;
            border-top: 1px solid #333;
        }

        /* Ajuste de tabelas dentro das respostas */
        .answer-content table {
            margin-bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>

    <h1>Curiosidades do Cinema (FAQ)</h1>
    <p>Algumas estatísticas interessantes baseadas na nossa base de dados.</p>
    
    <p><a href="/">« Voltar à página principal</a></p>
    <hr>

    <details>
        <summary>Qual o filme com maior Metascore por género?</summary>
        <div class="answer-content">
            <table>
                <thead><tr><th>Género</th><th>Título</th><th>Score</th></tr></thead>
                <tbody>
                {% for row in stats.top_metascore %}
                    <tr>
                        <td>{{ row.genre }}</td>
                        <td>{{ row.title }}</td>
                        <td>{{ row.metascore }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </details>

    <details>
        <summary>Qual o filme com maior Userscore por género?</summary>
        <div class="answer-content">
            <table>
                <thead><tr><th>Género</th><th>Título</th><th>Score</th></tr></thead>
                <tbody>
                {% for row in stats.top_userscore %}
                    <tr>
                        <td>{{ row.genre }}</td>
                        <td>{{ row.title }}</td>
                        <td>{{ row.userscore }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </details>

    <details>
        <summary>Quais os filmes onde os Críticos e o Público mais discordam (Diferença %)?</summary>
        <div class="answer-content">
            <table>
                <thead><tr><th>Título</th><th>Meta</th><th>User (Escalado)</th><th>Dif %</th></tr></thead>
                <tbody>
                {% for row in stats.diff_perc %}
                    <tr>
                        <td>{{ row.title }}</td>
                        <td>{{ row.metascore }}</td>
                        <td>{{ row.userscore_scaled|round(1) }}</td>
                        <td>{{ row.diff_perc|round(1) }}%</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </details>

    <details>
        <summary>Quem são os realizadores com mais de 5 filmes e notas acima da média?</summary>
        <div class="answer-content">
            <table>
                <thead><tr><th>Nome</th><th>Total Filmes</th><th>Rating Médio</th></tr></thead>
                <tbody>
                {% for row in stats.elite_directors %}
                    <tr>
                        <td>{{ row.name }}</td>
                        <td>{{ row.total }}</td>
                        <td>{{ row.avg_rating|round(2) }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </details>

    <details>
        <summary>Quem é a pessoa mais envolvida em filmes "Cult" (Público ama, Crítica odeia)?</summary>
        <div class="answer-content">
            <p>A resposta é: <strong>{{ stats.cult_hero.name }}</strong></p>
            <p>Com envolvimento em {{ stats.cult_hero.count }} obras deste tipo.</p>
        </div>
    </details>

    <details>
        <summary>Que filmes têm exatamente o mesmo elenco principal?</summary>
        <div class="answer-content">
            <table>
                <thead><tr><th>Filme A</th><th>Ano A</th><th>Filme B</th><th>Ano B</th></tr></thead>
                <tbody>
                {% for row in stats.same_cast %}
                    <tr>
                        <td>{{ row.t1 }}</td>
                        <td>{{ row.y1 }}</td>
                        <td>{{ row.t2 }}</td>
                        <td>{{ row.y2 }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </details>

    <details>
        <summary>Em que filmes uma pessoa teve múltiplos papéis (Ex: Diretor e Ator)?</summary>
        <div class="answer-content">
            <small>* A mostrar apenas os primeiros 50 resultados</small>
            <table>
                <thead><tr><th>Filme</th><th>Pessoa</th></tr></thead>
                <tbody>
                {% for row in stats.multi_roles %}
                    <tr>
                        <td>{{ row.title }}</td>
                        <td>{{ row.name }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </details>

    <br><br>
    <p><a href="/">« Voltar à página principal</a></p>

</body>
</html>